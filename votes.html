<!-- Overall structure for any web page -->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>My Poll</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  </head>
  <h1 class="p-3 m-3">My Poll</h1>
  <body>
      <div id = "voting2" class="p-3 m-3 border border-secondary">
        <div class="pp-3 mb-2 bg-light text-dark">
          <form class="form">
            <label for="text">Ask your question</label>
              <input type="text" id="question" name="text">
              <button class="btn btn-secondary" type="submit">Submit</button>
              <button id = "remove" class="btn btn-secondary" type="submit">Edit Question</button>
              <ul id="clicks"></ul>
            </form>
            <form class="two">
              <label for="text">Add options</label>
              <input type="text" id="choice">
              <button class="btn btn-secondary" type="submit">Add Option</button>
            </form>
            <ul id = "answers"></ul>
        </div>
      </div>
    <h3></h3>
    <div class="p-3 m-3 border border-secondary">
      <div class="pp-3 mb-2 bg-light text-dark">
        <form class="finish">
          <button id = "done" class="btn btn-secondary" type="submit">Submit</button>
          <ul id="final"></ul>
        </form>
      </div>
    </div>
    </body>
    <form id="hello"></form>
    <form id="dumb"></form>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>>
    <script>
      let y = '';
      let save =[];
      $('.form').on('click', 'button', function(event) {

        event.preventDefault();
        const input = $('input');
        const item = input.val();
        y = input.val();
        input.val('');
        const li = $(`<ul><h1>${item}</h1></ul>`);
        ;
        $('#clicks').append(li);

        $('#remove').click(function(){
          event.preventDefault();
          $(li).remove();
        });
      });



      //Add to the choice list
      $('.two').on('submit', function(event) {

        event.preventDefault();
        // Grab the text and empty the box

        const option = $('#choice');
        const op = option.val();
        option.val('');
        // Add a non-empty item to the list
        if (op) {
        $('#answers').append($(`
          <ul>
            <span><h2>${op}</h2></span>
            <button class="btn btn-secondary">Delete</button>
          </ul>
        `));
        }
    });



      // Delete from the choice list
     $('#answers').on('click', 'button', function(event) {
       $(this).closest('ul').remove();
     });

    $('.finish').on('click', 'button', function(event) {
      event.preventDefault();

      const list = $(`<ul><h1>${y}</h1></ul>`);
      const options = $('span');
      let array1 = [];

      $('#dumb').append($(`<div id = "voting2" class="p-3 m-3 border border-secondary">
        <div class="pp-3 mb-2 bg-light text-dark">
          <button class="btn btn-secondary" id="submit2">Create Another Poll</button>
          <button class="btn btn-secondary" id="submit3">View Results</button>
        </div>
      </div>`));

      $('#final').append(list);
      for (let option of options) {
        console.log(option);
        option = $(option);
        length1.push(0);
        array1.push(option.text());

      };

      save = array1;
      for (let choice of array1) {
        const choices = $(`<ul>${choice} <button id = "${choice}" class="btn btn-secondary">Vote</button><ul>`);
        $('#hello').append(choices);

      };
        console.log(array1);
        $('#answers').remove();
        $('#voting').remove();
        $('#voting2').remove();
        $('#done').remove();

    });


    let length1 = [];
    $('#hello').on('click', 'button', function(event) {
        event.preventDefault();
        for (let s of save) {
          const count = document.getElementById(s)
          count.onclick = function() {
            length1[save.indexOf(s)]++;
            console.log(length1);
        };
      };
    });

    $('#hello').on('click', 'button', function(event) {
        event.preventDefault(); // Don't really submit the form

        // Create a new list
        const list2 = $('<ul></ul>');

        // Translate each input value into a list item
        const votes = lenght1; // JQuery object represent all inputs
        for (let v of votes) {
          votes = $(v); // Turn into a JQuery object
          const l = $(`<li>${votes.val()}</li>`); // New list item
          list2.append(l);
          votes.val(''); // Empty out the box
        }

        $('#dumb').append(list2);
      });
    </script>
  </body>
</html>
